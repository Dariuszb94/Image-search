(this["webpackJsonpphoto-search"]=this["webpackJsonpphoto-search"]||[]).push([[0],{47:function(e,t,s){},69:function(e,t,s){"use strict";s.r(t);var a=s(2),n=s(0),r=s(22),c=s.n(r),i=(s(47),s(13)),l=s(14),o=s(16),u=s(15),h=s(32),d=s(17),g=s(28),j=s.n(g),p=s(37),m=s.n(p),b=s(19),y="UPDATE_IMAGES",_="CHANGE_QUERY",O="UPDATE_TAGS",v=function(e){return function(t){var s=e.map((function(e){return e}));t({type:y,payload:s})}},f=function(e){return function(t){t({type:_,payload:e})}},x=s(3),N=s(10),Q=function(e){Object(o.a)(s,e);var t=Object(u.a)(s);function s(e){var a;return Object(i.a)(this,s),(a=t.call(this,e)).state={searchQuery:"",tags:[],ready:0},a.handleEnter=a.handleEnter.bind(Object(d.a)(a)),a.changeQuery=a.changeQuery.bind(Object(d.a)(a)),a}return Object(l.a)(s,[{key:"componentDidMount",value:function(){}},{key:"changeQuery",value:function(e){var t=this;this.state.searchQuery.length>2&&(e?this.setState({searchQuery:e},(function(){t.props.changeQuery(e),t.props.history.push("/ResultsPage"),t.setState({tags:[]}),t.collectTags(1)})):(this.props.changeQuery(this.state.searchQuery),this.props.history.push("/ResultsPage"),this.setState({tags:[]}),this.collectTags(1)))}},{key:"collectTags",value:function(e){var t=this;new j.a({accessKey:"mwcZJW1qYyORxKFdUfn5Hn12UO1aDqVip2Yrj2S4TJk"}).search.photos(this.state.searchQuery,1,30).then(g.toJson).then((function(s){t.props.onResultPage&&!e||t.props.updateImages(s.results);for(var a=new Set,n=new Set,r=0;r<s.results.length;r++){var c,i;(null===(c=s.results[r].description)||void 0===c?void 0:c.includes(t.state.searchQuery))&&s.results[r].description.length<30&&a.add(s.results[r].description),(null===(i=s.results[r].alt_description)||void 0===i?void 0:i.includes(t.state.searchQuery))&&s.results[r].alt_description.length<30&&a.add(s.results[r].alt_description);for(var l=0;l<s.results[r].tags.length;l++)s.results[r].tags[l].title.length<20&&n.add(s.results[r].tags[l].title),s.results[r].tags[l].title.includes(t.state.searchQuery)&&s.results[r].tags[l].title.length<20&&a.add(s.results[r].tags[l].title)}e?t.setState({tags:[]}):t.setState({tags:Object(h.a)(a)}),e&&t.setState({searchQuery:""}),t.props.onResultPage&&!e||t.props.updateTags(Object(h.a)(n)),t.state.tags.length?t.setState({noTags:!1}):t.setState({noTags:!0})}))}},{key:"handleEnter",value:function(e){13==e.keyCode&&this.state.searchQuery.length>2&&(this.props.changeQuery(this.state.searchQuery),this.props.history.push("/ResultsPage"),this.collectTags(1))}},{key:"filterTags",value:function(e){var t=this;this.setState({searchQuery:e},(function(){t.state.searchQuery.length>=3?t.collectTags():t.setState({tags:[]})}))}},{key:"render",value:function(){var e=this;return Object(a.jsxs)("section",{className:"search",children:[Object(a.jsx)("div",{className:"test",children:this.state.tags.length}),Object(a.jsx)("input",{className:"search__input",placeholder:"type keyword (min 3 chars)",onChange:function(t){return e.filterTags(t.target.value)},onKeyDown:this.handleEnter,value:this.state.searchQuery}),Object(a.jsx)(m.a,{className:"search__icon",onClick:function(){e.changeQuery()}}),Object(a.jsx)("ul",{className:"search__suggest",children:this.state.tags.slice(0,5).map((function(t,s){return Object(a.jsx)("li",{className:"search__suggest__option",onClick:function(){e.changeQuery(t)},children:t},s)}))}),this.state.noTags?Object(a.jsx)("div",{className:"search__none",children:"No results"}):null]})}}]),s}(n.Component),w=Object(N.d)(x.f,Object(b.b)((function(e){return{images:e.images.images,query:e.query.query}}),{updateImages:v,changeQuery:f,updateTags:function(e){return function(t){var s=e.map((function(e){return e}));t({type:O,payload:s})}}}))(Q),k=function(e){Object(o.a)(s,e);var t=Object(u.a)(s);function s(e){var a;return Object(i.a)(this,s),(a=t.call(this,e)).state={},a}return Object(l.a)(s,[{key:"render",value:function(){return Object(a.jsxs)("section",{className:"search-bg",children:[Object(a.jsx)("h1",{className:"search__title",children:"Image search"}),Object(a.jsx)(w,{})]})}}]),s}(n.Component),D=s(38),S=s.n(D),T=s(39),M=s.n(T),C=s(25),q=s.n(C),P=function(e){Object(o.a)(s,e);var t=Object(u.a)(s);function s(e){var a;return Object(i.a)(this,s),(a=t.call(this,e)).state={showModal:!1},a.showModal=a.showModal.bind(Object(d.a)(a)),a.hideModal=a.hideModal.bind(Object(d.a)(a)),a}return Object(l.a)(s,[{key:"showModal",value:function(){this.state.showModal||(q()(".result").css("pointer-events","none"),this.setState({showModal:!0},(function(){q()(".overlay__close").css("pointer-events","auto")})))}},{key:"hideModal",value:function(){q()(".result").css("pointer-events","auto"),this.setState({showModal:!1})}},{key:"render",value:function(){var e=this;return Object(a.jsxs)("section",{className:"result",onClick:function(){e.showModal()},children:[Object(a.jsx)("img",{src:this.props.imageData.urls.small,className:"result__img"}),Object(a.jsx)("ul",{className:"result__tags",children:this.props.imageData?this.props.imageData.tags.map((function(e,t){return Object(a.jsx)("li",{className:"results__tag",children:e.title},t)})):null}),this.state.showModal?Object(a.jsx)("div",{className:"result__overlay",children:Object(a.jsxs)("div",{className:"result__overlay__inner",children:[Object(a.jsxs)("div",{className:"overlay__author",children:[Object(a.jsx)("div",{className:"overlay__author__column",children:Object(a.jsx)("img",{className:"overlay__author__column__img",src:this.props.imageData.user.profile_image.medium})}),Object(a.jsxs)("div",{className:"overlay__author__column",children:[Object(a.jsx)("div",{className:"overlay__author__column__name",children:this.props.imageData.user.name}),Object(a.jsx)("div",{className:"overlay__author__column__name",children:this.props.imageData.user.twitter_username?"@"+this.props.imageData.user.twitter_username:null})]})]}),Object(a.jsx)("img",{className:"overlay__img",src:this.props.imageData.urls.regular}),this.props.imageData.user.location?Object(a.jsxs)("div",{className:"overlay__location",children:[Object(a.jsx)(S.a,{}),Object(a.jsx)("span",{children:this.props.imageData.user.location})]}):null,Object(a.jsx)(M.a,{className:"overlay__close",onClick:function(){e.hideModal()}})]})}):null]})}}]),s}(n.Component),E=function(e){Object(o.a)(s,e);var t=Object(u.a)(s);function s(e){var a;return Object(i.a)(this,s),(a=t.call(this,e)).state={},a}return Object(l.a)(s,[{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){return Object(a.jsxs)("section",{className:"results",children:[Object(a.jsx)(w,{onResultPage:1}),Object(a.jsx)("header",{className:"results__header",children:this.props.query}),Object(a.jsx)("ul",{className:"results__tags",children:this.props.tags?this.props.tags.slice(0,10).map((function(e,t){return Object(a.jsx)("li",{className:"results__tag",children:e},t)})):null}),Object(a.jsx)("ul",{className:"results__list",children:this.props.images?this.props.images.slice(0,10).map((function(e,t){return Object(a.jsx)(P,{imageData:e},t)})):null})]})}}]),s}(n.Component),R=Object(b.b)((function(e){return{images:e.images.images,query:e.query.query,tags:e.tags.tags}}),{updateImages:v,changeQuery:f})(E);var I=function(e){var t=e.location;return Object(a.jsx)("div",{className:"App",children:Object(a.jsxs)(x.c,{location:t,children:["\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0",Object(a.jsx)(x.a,{exact:!0,path:"/image-search",component:k}),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0",Object(a.jsx)(x.a,{path:"/ResultsPage",component:R}),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0",Object(a.jsx)(x.a,{component:k})]})})},A=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,81)).then((function(t){var s=t.getCLS,a=t.getFID,n=t.getFCP,r=t.getLCP,c=t.getTTFB;s(e),a(e),n(e),r(e),c(e)}))},U=s(24),F=s(40),J=s(12),G={},K={},Y={},B=Object(N.c)({images:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y:return Object(J.a)(Object(J.a)({},e),{},{images:t.payload});default:return e}},query:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _:return Object(J.a)(Object(J.a)({},e),{},{query:t.payload});default:return e}},tags:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return Object(J.a)(Object(J.a)({},e),{},{tags:t.payload});default:return e}}}),H=[F.a],L=Object(N.e)(B,{},Object(N.d)(N.a.apply(void 0,H)));c.a.render(Object(a.jsx)(b.a,{store:L,children:Object(a.jsx)(U.a,{children:Object(a.jsx)(x.a,{path:"/",component:I})})}),document.getElementById("root")),A()}},[[69,1,2]]]);
//# sourceMappingURL=main.ea1b802c.chunk.js.map