(this["webpackJsonpphoto-search"]=this["webpackJsonpphoto-search"]||[]).push([[0],{44:function(e,t,s){},67:function(e,t,s){"use strict";s.r(t);var a=s(2),n=s(0),c=s(22),r=s.n(c),i=(s(44),s(14)),u=s(15),o=s(18),l=s(17),h=s(20),g=s(30),d=s(19),p=s(26),j=s.n(p),b=s(36),y=s.n(b),O=s(16),f="UPDATE_IMAGES",v="CHANGE_QUERY",m="UPDATE_TAGS",_=function(e){return function(t){var s=e.map((function(e){return e}));t({type:f,payload:s})}},x=function(e){return function(t){t({type:v,payload:e})}},Q=s(3),N=s(10),T=function(e){Object(o.a)(s,e);var t=Object(l.a)(s);function s(e){var a;return Object(i.a)(this,s),(a=t.call(this,e)).state={searchQuery:"",tags:[]},a.handleEnter=a.handleEnter.bind(Object(d.a)(a)),a.changeQuery=a.changeQuery.bind(Object(d.a)(a)),a}return Object(u.a)(s,[{key:"changeQuery",value:function(){this.state.searchQuery.length>2&&(this.props.changeQuery(this.state.searchQuery),this.props.history.push("/ResultsPage"))}},{key:"collectTags",value:function(){var e=this;new j.a({accessKey:"mwcZJW1qYyORxKFdUfn5Hn12UO1aDqVip2Yrj2S4TJk"}).search.photos(this.state.searchQuery,1,30).then(p.toJson).then((function(t){e.props.updateImages(t.results);for(var s=new Set,a=new Set,n=0;n<t.results.length;n++){var c,r;(null===(c=t.results[n].description)||void 0===c?void 0:c.includes(e.state.searchQuery))&&s.add(t.results[n].description),null===(r=t.results[n].alt_description)||void 0===r||r.includes(e.state.searchQuery),s.add(t.results[n].alt_description);for(var i=0;i<t.results[n].tags.length;i++)t.results[n].tags[i].title.length<20&&a.add(t.results[n].tags[i].title),t.results[n].tags[i].title.includes(e.state.searchQuery)&&t.results[n].tags[i].title.length<20&&s.add(t.results[n].tags[i].title)}e.setState({tags:Object(g.a)(s)}),e.props.updateTags(Object(g.a)(a)),e.state.tags.length?e.setState({noTags:!1}):e.setState({noTags:!0})}))}},{key:"handleEnter",value:function(e){13==e.keyCode&&this.state.searchQuery.length>2&&(this.props.changeQuery(this.state.searchQuery),this.props.history.push("/ResultsPage"))}},{key:"filterTags",value:function(e){var t=this;this.setState({searchQuery:e},(function(){t.state.searchQuery.length>=3?t.collectTags():t.setState({tags:[]})}))}},{key:"render",value:function(){var e=this;return Object(a.jsxs)("section",{className:"search",children:[Object(a.jsx)("input",{className:"search__input",placeholder:"type keyword (min 3 chars)",onChange:function(t){return e.filterTags(t.target.value)},onKeyDown:this.handleEnter}),Object(a.jsx)(y.a,{className:"search__icon",onClick:function(){e.changeQuery()}}),Object(a.jsx)("ul",{className:"search__suggest",children:this.state.tags.slice(0,5).map((function(t,s){var n;return Object(a.jsx)("li",(n={className:"search__suggest__option",onClick:function(){e.changeQuery()}},Object(h.a)(n,"onClick",(function(){e.changeQuery()})),Object(h.a)(n,"children",t),n),s)}))}),this.state.noTags?Object(a.jsx)("div",{className:"search__none",children:"No results"}):null]})}}]),s}(n.Component),E=Object(N.d)(Q.f,Object(O.b)((function(e){return{images:e.images.images,query:e.query.query}}),{updateImages:_,changeQuery:x,updateTags:function(e){return function(t){var s=e.map((function(e){return e}));t({type:m,payload:s})}}}))(T),k=function(e){Object(o.a)(s,e);var t=Object(l.a)(s);function s(e){var a;return Object(i.a)(this,s),(a=t.call(this,e)).state={},a}return Object(u.a)(s,[{key:"render",value:function(){return Object(a.jsxs)("section",{className:"search-bg",children:[Object(a.jsx)("h1",{className:"search__title",children:"Image search"}),Object(a.jsx)(E,{})]})}}]),s}(n.Component),w=function(e){Object(o.a)(s,e);var t=Object(l.a)(s);function s(e){var a;return Object(i.a)(this,s),(a=t.call(this,e)).state={},a}return Object(u.a)(s,[{key:"componentDidUpdate",value:function(){console.log(this.props.tags)}},{key:"render",value:function(){return Object(a.jsxs)("section",{className:"results",children:[Object(a.jsx)(E,{}),Object(a.jsx)("header",{className:"results__header",children:this.props.query}),Object(a.jsx)("ul",{className:"results__tags",children:this.props.tags?this.props.tags.map((function(e,t){return Object(a.jsx)("li",{className:"results__tag",children:e},t)})):null})]})}}]),s}(n.Component),S=Object(O.b)((function(e){return{images:e.images.images,query:e.query.query,tags:e.tags.tags}}),{updateImages:_,changeQuery:x})(w);var C=function(e){var t=e.location;return Object(a.jsx)("div",{className:"App",children:Object(a.jsxs)(Q.c,{location:t,children:["\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0",Object(a.jsx)(Q.a,{exact:!0,path:"/image-search",component:k}),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0",Object(a.jsx)(Q.a,{path:"/ResultsPage",component:S}),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0",Object(a.jsx)(Q.a,{component:k})]})})},q=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,78)).then((function(t){var s=t.getCLS,a=t.getFID,n=t.getFCP,c=t.getLCP,r=t.getTTFB;s(e),a(e),n(e),c(e),r(e)}))},D=s(24),I=s(37),U=s(12),P={},R={},A={},F=Object(N.c)({images:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return Object(U.a)(Object(U.a)({},e),{},{images:t.payload});default:return e}},query:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return Object(U.a)(Object(U.a)({},e),{},{query:t.payload});default:return e}},tags:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:return Object(U.a)(Object(U.a)({},e),{},{tags:t.payload});default:return e}}}),J=[I.a],L=Object(N.e)(F,{},Object(N.d)(N.a.apply(void 0,J),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()));r.a.render(Object(a.jsx)(O.a,{store:L,children:Object(a.jsx)(D.a,{children:Object(a.jsx)(Q.a,{path:"/",component:C})})}),document.getElementById("root")),q()}},[[67,1,2]]]);
//# sourceMappingURL=main.502aa7e5.chunk.js.map