(this["webpackJsonpphoto-search"]=this["webpackJsonpphoto-search"]||[]).push([[0],{47:function(e,t,s){},69:function(e,t,s){"use strict";s.r(t);var a=s(2),n=s(0),r=s(22),c=s.n(r),i=(s(47),s(13)),l=s(14),o=s(16),u=s(15),h=s(32),d=s(17),j=s(28),p=s.n(j),g=s(37),m=s.n(g),b=s(19),_="UPDATE_IMAGES",O="CHANGE_QUERY",y="UPDATE_TAGS",v=function(e){return function(t){var s=e.map((function(e){return e}));t({type:_,payload:s})}},f=function(e){return function(t){t({type:O,payload:e})}},x=s(3),N=s(10),w=function(e){Object(o.a)(s,e);var t=Object(u.a)(s);function s(e){var a;return Object(i.a)(this,s),(a=t.call(this,e)).state={searchQuery:"",tags:[],ready:0},a.handleEnter=a.handleEnter.bind(Object(d.a)(a)),a.changeQuery=a.changeQuery.bind(Object(d.a)(a)),a}return Object(l.a)(s,[{key:"changeQuery",value:function(){this.state.searchQuery.length>2&&(this.props.changeQuery(this.state.searchQuery),this.props.history.push("/ResultsPage"),this.setState({tags:[]}))}},{key:"collectTags",value:function(){var e=this;new p.a({accessKey:"mwcZJW1qYyORxKFdUfn5Hn12UO1aDqVip2Yrj2S4TJk"}).search.photos(this.state.searchQuery,1,30).then(j.toJson).then((function(t){e.props.updateImages(t.results);for(var s=new Set,a=new Set,n=0;n<t.results.length;n++){var r,c;(null===(r=t.results[n].description)||void 0===r?void 0:r.includes(e.state.searchQuery))&&t.results[n].description.length<30&&s.add(t.results[n].description),(null===(c=t.results[n].alt_description)||void 0===c?void 0:c.includes(e.state.searchQuery))&&t.results[n].alt_description.length<30&&s.add(t.results[n].alt_description);for(var i=0;i<t.results[n].tags.length;i++)t.results[n].tags[i].title.length<20&&a.add(t.results[n].tags[i].title),t.results[n].tags[i].title.includes(e.state.searchQuery)&&t.results[n].tags[i].title.length<20&&s.add(t.results[n].tags[i].title)}e.setState({tags:Object(h.a)(s)}),e.props.updateTags(Object(h.a)(a)),e.state.tags.length?e.setState({noTags:!1}):e.setState({noTags:!0})}))}},{key:"handleEnter",value:function(e){13==e.keyCode&&this.state.searchQuery.length>2&&(this.props.changeQuery(this.state.searchQuery),this.props.history.push("/ResultsPage"))}},{key:"filterTags",value:function(e){var t=this;this.setState({searchQuery:e},(function(){t.state.searchQuery.length>=3?t.collectTags(t.state.ready):t.setState({tags:[]})}))}},{key:"render",value:function(){var e=this;return Object(a.jsxs)("section",{className:"search",children:[Object(a.jsx)("input",{className:"search__input",placeholder:"type keyword (min 3 chars)",onChange:function(t){return e.filterTags(t.target.value)},onKeyDown:this.handleEnter}),Object(a.jsx)(m.a,{className:"search__icon",onClick:function(){e.changeQuery()}}),Object(a.jsx)("ul",{className:"search__suggest",children:this.state.tags.slice(0,5).map((function(t,s){return Object(a.jsx)("li",{className:"search__suggest__option",onClick:function(){e.changeQuery()},children:t},s)}))}),this.state.noTags?Object(a.jsx)("div",{className:"search__none",children:"No results"}):null]})}}]),s}(n.Component),Q=Object(N.d)(x.f,Object(b.b)((function(e){return{images:e.images.images,query:e.query.query}}),{updateImages:v,changeQuery:f,updateTags:function(e){return function(t){var s=e.map((function(e){return e}));t({type:y,payload:s})}}}))(w),k=function(e){Object(o.a)(s,e);var t=Object(u.a)(s);function s(e){var a;return Object(i.a)(this,s),(a=t.call(this,e)).state={},a}return Object(l.a)(s,[{key:"render",value:function(){return Object(a.jsxs)("section",{className:"search-bg",children:[Object(a.jsx)("h1",{className:"search__title",children:"Image search"}),Object(a.jsx)(Q,{})]})}}]),s}(n.Component),D=s(38),T=s.n(D),C=s(39),M=s.n(C),S=s(25),q=s.n(S),E=function(e){Object(o.a)(s,e);var t=Object(u.a)(s);function s(e){var a;return Object(i.a)(this,s),(a=t.call(this,e)).state={showModal:!1},a.showModal=a.showModal.bind(Object(d.a)(a)),a.hideModal=a.hideModal.bind(Object(d.a)(a)),a}return Object(l.a)(s,[{key:"showModal",value:function(){this.state.showModal||(q()(".result").css("pointer-events","none"),this.setState({showModal:!0},(function(){q()(".overlay__close").css("pointer-events","auto")})))}},{key:"hideModal",value:function(){q()(".result").css("pointer-events","auto"),this.setState({showModal:!1})}},{key:"render",value:function(){var e=this;return Object(a.jsxs)("section",{className:"result",onClick:function(){e.showModal()},children:[Object(a.jsx)("img",{src:this.props.imageData.urls.small,className:"result__img"}),Object(a.jsx)("ul",{className:"result__tags",children:this.props.imageData?this.props.imageData.tags.map((function(e,t){return Object(a.jsx)("li",{className:"results__tag",children:e.title},t)})):null}),this.state.showModal?Object(a.jsx)("div",{className:"result__overlay",children:Object(a.jsxs)("div",{className:"result__overlay__inner",children:[Object(a.jsxs)("div",{className:"overlay__author",children:[Object(a.jsx)("div",{className:"overlay__author__column",children:Object(a.jsx)("img",{className:"overlay__author__column__img",src:this.props.imageData.user.profile_image.medium})}),Object(a.jsxs)("div",{className:"overlay__author__column",children:[Object(a.jsx)("div",{className:"overlay__author__column__name",children:this.props.imageData.user.name}),Object(a.jsx)("div",{className:"overlay__author__column__name",children:this.props.imageData.user.twitter_username?"@"+this.props.imageData.user.twitter_username:null})]})]}),Object(a.jsx)("img",{className:"overlay__img",src:this.props.imageData.urls.regular}),this.props.imageData.user.location?Object(a.jsxs)("div",{className:"overlay__location",children:[Object(a.jsx)(T.a,{}),Object(a.jsx)("span",{children:this.props.imageData.user.location})]}):null,Object(a.jsx)(M.a,{className:"overlay__close",onClick:function(){e.hideModal()}})]})}):null]})}}]),s}(n.Component),I=function(e){Object(o.a)(s,e);var t=Object(u.a)(s);function s(e){var a;return Object(i.a)(this,s),(a=t.call(this,e)).state={},a}return Object(l.a)(s,[{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){return Object(a.jsxs)("section",{className:"results",children:[Object(a.jsx)(Q,{}),Object(a.jsx)("header",{className:"results__header",children:this.props.query}),Object(a.jsx)("ul",{className:"results__tags",children:this.props.tags?this.props.tags.slice(0,10).map((function(e,t){return Object(a.jsx)("li",{className:"results__tag",children:e},t)})):null}),Object(a.jsx)("ul",{className:"results__list",children:this.props.images?this.props.images.slice(0,10).map((function(e,t){return Object(a.jsx)(E,{imageData:e},t)})):null})]})}}]),s}(n.Component),P=Object(b.b)((function(e){return{images:e.images.images,query:e.query.query,tags:e.tags.tags}}),{updateImages:v,changeQuery:f})(I);var A=function(e){var t=e.location;return Object(a.jsx)("div",{className:"App",children:Object(a.jsxs)(x.c,{location:t,children:["\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0",Object(a.jsx)(x.a,{exact:!0,path:"/image-search",component:k}),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0",Object(a.jsx)(x.a,{path:"/ResultsPage",component:P}),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0",Object(a.jsx)(x.a,{component:k})]})})},U=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,80)).then((function(t){var s=t.getCLS,a=t.getFID,n=t.getFCP,r=t.getLCP,c=t.getTTFB;s(e),a(e),n(e),r(e),c(e)}))},F=s(24),J=s(40),R=s(12),G={},K={},Y={},B=Object(N.c)({images:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _:return Object(R.a)(Object(R.a)({},e),{},{images:t.payload});default:return e}},query:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return Object(R.a)(Object(R.a)({},e),{},{query:t.payload});default:return e}},tags:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y:return Object(R.a)(Object(R.a)({},e),{},{tags:t.payload});default:return e}}}),H=[J.a],L=Object(N.e)(B,{},Object(N.d)(N.a.apply(void 0,H)));c.a.render(Object(a.jsx)(b.a,{store:L,children:Object(a.jsx)(F.a,{children:Object(a.jsx)(x.a,{path:"/",component:A})})}),document.getElementById("root")),U()}},[[69,1,2]]]);
//# sourceMappingURL=main.bbbb895e.chunk.js.map