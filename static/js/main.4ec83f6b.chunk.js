(this["webpackJsonpphoto-search"]=this["webpackJsonpphoto-search"]||[]).push([[0],{47:function(e,t,s){},69:function(e,t,s){"use strict";s.r(t);var a=s(2),n=s(0),r=s(22),c=s.n(r),i=(s(47),s(32)),l=s(15),o=s(16),u=s(13),h=s(19),d=s(18),p=s(28),g=s.n(p),j=s(37),m=s.n(j),_=s(17),b="UPDATE_IMAGES",y="CHANGE_QUERY",O="UPDATE_TAGS",v=function(e){return function(t){var s=e.map((function(e){return e}));t({type:b,payload:s})}},f=function(e){return function(t){t({type:y,payload:e})}},x=s(3),N=s(10),w=function(e){Object(h.a)(s,e);var t=Object(d.a)(s);function s(e){var a;return Object(l.a)(this,s),(a=t.call(this,e)).state={searchQuery:"",tags:[],ready:0},a.handleEnter=a.handleEnter.bind(Object(u.a)(a)),a.changeQuery=a.changeQuery.bind(Object(u.a)(a)),a}return Object(o.a)(s,[{key:"componentDidMount",value:function(){}},{key:"changeQuery",value:function(e){var t=this;this.state.searchQuery.length>2&&(e?this.setState({searchQuery:e},(function(){t.props.changeQuery(e),t.props.history.push("/ResultsPage"),t.setState({tags:[]}),t.collectTags(1)})):(this.props.changeQuery(this.state.searchQuery),this.props.history.push("/ResultsPage"),this.setState({tags:[]}),this.collectTags(1)))}},{key:"collectTags",value:function(e){var t=this;new g.a({accessKey:"mwcZJW1qYyORxKFdUfn5Hn12UO1aDqVip2Yrj2S4TJk"}).search.photos(this.state.searchQuery,1,30).then(p.toJson).then((function(s){t.props.onResultPage&&!e||t.props.updateImages(s.results);for(var a=new Set,n=new Set,r=0;r<s.results.length;r++){var c,l;(null===(c=s.results[r].description)||void 0===c?void 0:c.includes(t.state.searchQuery))&&s.results[r].description.length<30&&a.add(s.results[r].description),(null===(l=s.results[r].alt_description)||void 0===l?void 0:l.includes(t.state.searchQuery))&&s.results[r].alt_description.length<30&&a.add(s.results[r].alt_description);for(var o=0;o<s.results[r].tags.length;o++)s.results[r].tags[o].title.length<20&&n.add(s.results[r].tags[o].title),s.results[r].tags[o].title.includes(t.state.searchQuery)&&s.results[r].tags[o].title.length<20&&a.add(s.results[r].tags[o].title)}e?t.setState({tags:[]}):t.setState({tags:Object(i.a)(a)}),e&&t.setState({searchQuery:""}),t.props.onResultPage&&!e||t.props.updateTags(Object(i.a)(n)),t.state.tags.length?t.setState({noTags:!1}):t.setState({noTags:!0})}))}},{key:"handleEnter",value:function(e){13===e.keyCode&&this.state.searchQuery.length>2&&(this.props.changeQuery(this.state.searchQuery),this.props.history.push("/ResultsPage"),this.collectTags(1))}},{key:"filterTags",value:function(e){var t=this;this.setState({searchQuery:e},(function(){t.state.searchQuery.length>=3?t.collectTags():t.setState({tags:[]})}))}},{key:"render",value:function(){var e=this;return Object(a.jsxs)("section",{className:"search",children:[Object(a.jsx)("input",{className:"search__input",placeholder:"type keyword (min 3 chars)",onChange:function(t){return e.filterTags(t.target.value.toLowerCase())},onKeyDown:this.handleEnter,value:this.state.searchQuery}),Object(a.jsx)(m.a,{className:"search__icon",onClick:function(){e.changeQuery()}}),Object(a.jsx)("ul",{className:"search__suggest",children:this.state.tags.slice(0,5).map((function(t,s){return Object(a.jsx)("li",{className:"search__suggest__option",onClick:function(){e.changeQuery(t)},children:t},s)}))}),this.state.noTags?Object(a.jsx)("div",{className:"search__none",children:"No results"}):null]})}}]),s}(n.Component),Q=Object(N.d)(x.f,Object(_.b)((function(e){return{images:e.images.images,query:e.query.query}}),{updateImages:v,changeQuery:f,updateTags:function(e){return function(t){var s=e.map((function(e){return e}));t({type:O,payload:s})}}}))(w);function D(){return Object(a.jsxs)("section",{className:"search-bg",children:[Object(a.jsx)("h1",{className:"search__title",children:"Image search"}),Object(a.jsx)(Q,{})]})}var S=s(38),T=s.n(S),k=s(39),E=s.n(k),M=s(25),C=s.n(M),q=function(e){Object(h.a)(s,e);var t=Object(d.a)(s);function s(e){var a;return Object(l.a)(this,s),(a=t.call(this,e)).state={showModal:!1},a.showModal=a.showModal.bind(Object(u.a)(a)),a.hideModal=a.hideModal.bind(Object(u.a)(a)),a}return Object(o.a)(s,[{key:"showModal",value:function(){this.state.showModal||(C()(".result").css("pointer-events","none"),this.setState({showModal:!0},(function(){C()(".overlay__close").css("pointer-events","auto")})))}},{key:"hideModal",value:function(){C()(".result").css("pointer-events","auto"),this.setState({showModal:!1})}},{key:"render",value:function(){var e=this;return Object(a.jsxs)("section",{className:"result",onClick:function(){e.showModal()},children:[Object(a.jsx)("img",{src:this.props.imageData.urls.small,className:"result__img",alt:this.props.imageData.description}),Object(a.jsx)("ul",{className:"result__tags",children:this.props.imageData?this.props.imageData.tags.map((function(e,t){return Object(a.jsx)("li",{className:"results__tag",children:e.title},t)})):null}),this.state.showModal?Object(a.jsx)("div",{className:"result__overlay",children:Object(a.jsxs)("div",{className:"result__overlay__inner",children:[Object(a.jsxs)("div",{className:"overlay__author",children:[Object(a.jsx)("div",{className:"overlay__author__column",children:Object(a.jsx)("img",{className:"overlay__author__column__img",src:this.props.imageData.user.profile_image.medium,alt:this.props.imageData.description})}),Object(a.jsxs)("div",{className:"overlay__author__column",children:[Object(a.jsx)("div",{className:"overlay__author__column__name",children:this.props.imageData.user.name}),Object(a.jsx)("div",{className:"overlay__author__column__name",children:this.props.imageData.user.twitter_username?"@"+this.props.imageData.user.twitter_username:null})]})]}),Object(a.jsx)("img",{className:"overlay__img",src:this.props.imageData.urls.regular,alt:this.props.imageData.description}),this.props.imageData.user.location?Object(a.jsxs)("div",{className:"overlay__location",children:[Object(a.jsx)(T.a,{}),Object(a.jsx)("span",{children:this.props.imageData.user.location})]}):null,Object(a.jsx)(E.a,{className:"overlay__close",onClick:function(){e.hideModal()}})]})}):null]})}}]),s}(n.Component),P=function(e){Object(h.a)(s,e);var t=Object(d.a)(s);function s(){return Object(l.a)(this,s),t.apply(this,arguments)}return Object(o.a)(s,[{key:"render",value:function(){return Object(a.jsxs)("section",{className:"results",children:[Object(a.jsx)(Q,{onResultPage:1}),Object(a.jsx)("header",{className:"results__header",children:this.props.query}),Object(a.jsx)("ul",{className:"results__tags",children:this.props.tags?this.props.tags.slice(0,10).map((function(e,t){return Object(a.jsx)("li",{className:"results__tag",children:e},t)})):null}),Object(a.jsx)("ul",{className:"results__list",children:this.props.images?this.props.images.slice(0,10).map((function(e,t){return Object(a.jsx)(q,{imageData:e},t)})):null})]})}}]),s}(n.Component),R=Object(_.b)((function(e){return{images:e.images.images,query:e.query.query,tags:e.tags.tags}}),{updateImages:v,changeQuery:f})(P);var I=function(e){var t=e.location;return Object(a.jsx)("div",{className:"App",children:Object(a.jsxs)(x.c,{location:t,children:["\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0",Object(a.jsx)(x.a,{exact:!0,path:"/image-search",component:D}),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0",Object(a.jsx)(x.a,{path:"/ResultsPage",component:R}),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0",Object(a.jsx)(x.a,{component:D})]})})},U=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,80)).then((function(t){var s=t.getCLS,a=t.getFID,n=t.getFCP,r=t.getLCP,c=t.getTTFB;s(e),a(e),n(e),r(e),c(e)}))},A=s(24),F=s(40),J=s(12),L={},X={},G={},K=Object(N.c)({images:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:return Object(J.a)(Object(J.a)({},e),{},{images:t.payload});default:return e}},query:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y:return Object(J.a)(Object(J.a)({},e),{},{query:t.payload});default:return e}},tags:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return Object(J.a)(Object(J.a)({},e),{},{tags:t.payload});default:return e}}}),V=[F.a],Y=Object(N.e)(K,{},Object(N.d)(N.a.apply(void 0,V),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()));c.a.render(Object(a.jsx)(_.a,{store:Y,children:Object(a.jsx)(A.a,{children:Object(a.jsx)(x.a,{path:"/",component:I})})}),document.getElementById("root")),U()}},[[69,1,2]]]);
//# sourceMappingURL=main.4ec83f6b.chunk.js.map