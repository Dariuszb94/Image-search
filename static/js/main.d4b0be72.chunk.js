(this["webpackJsonpphoto-search"]=this["webpackJsonpphoto-search"]||[]).push([[0],{43:function(e,t,s){},66:function(e,t,s){"use strict";s.r(t);var a=s(2),n=s(0),c=s(20),r=s.n(c),i=(s(43),s(14)),o=s(15),u=s(17),l=s(16),h=s(36),d=s(22),j=s(25),p=s.n(j),b=s(34),g=s.n(b),O=s(23),v="UPDATE_IMAGES",f="CHANGE_QUERY",y=s(12),m=s(3),_=s(10),x=function(e){Object(u.a)(s,e);var t=Object(l.a)(s);function s(e){var a;return Object(i.a)(this,s),(a=t.call(this,e)).state={searchQuery:"",tags:[]},a.handleEnter=a.handleEnter.bind(Object(d.a)(a)),a}return Object(o.a)(s,[{key:"componentDidUpdate",value:function(){this.props.changeQuery(this.state.searchQuery)}},{key:"collectTags",value:function(){var e=this;new p.a({accessKey:"mwcZJW1qYyORxKFdUfn5Hn12UO1aDqVip2Yrj2S4TJk"}).search.photos(this.state.searchQuery,1,30).then(j.toJson).then((function(t){e.props.updateImages(t.results);for(var s=new Set,a=0;a<t.results.length;a++){var n,c;(null===(n=t.results[a].description)||void 0===n?void 0:n.includes(e.state.searchQuery))&&s.add(t.results[a].description),(null===(c=t.results[a].alt_description)||void 0===c?void 0:c.includes(e.state.searchQuery))&&s.add(t.results[a].alt_description);for(var r=0;r<t.results[a].tags.length;r++)t.results[a].tags[r].title.includes(e.state.searchQuery)&&s.add(t.results[a].tags[r].title)}e.setState({tags:Object(h.a)(s)}),e.state.tags.length?e.setState({noTags:!1}):e.setState({noTags:!0})}))}},{key:"handleEnter",value:function(){this.props.history.push("/ResultsPage"),console.log(this.props.history)}},{key:"filterTags",value:function(e){var t=this;this.setState({searchQuery:e},(function(){t.state.searchQuery.length>=3?t.collectTags():t.setState({tags:[]})}))}},{key:"render",value:function(){var e=this;return Object(a.jsxs)("section",{className:"search",children:[Object(a.jsx)("input",{className:"search__input",placeholder:"type keyword (min 3 chars)",onChange:function(t){return e.filterTags(t.target.value)},onKeyPress:function(){e.handleEnter()}}),Object(a.jsx)(y.b,{to:"/ResultsPage",activeClassName:"active",children:Object(a.jsx)(g.a,{className:"search__icon"})}),Object(a.jsx)("ul",{className:"search__suggest",children:this.state.tags.slice(0,5).map((function(e,t){return Object(a.jsx)("li",{className:"search__suggest__option",children:Object(a.jsx)(y.b,{to:"/ResultsPage",activeClassName:"active",children:e})},t)}))}),this.state.noTags?Object(a.jsx)("div",{className:"search__none",children:"No results"}):null]})}}]),s}(n.Component),N=Object(_.d)(m.f,Object(O.b)((function(e){return{images:e.images.images,query:e.query.query}}),{updateImages:function(e){return function(t){var s=e.map((function(e){return e}));t({type:v,payload:s})}},changeQuery:function(e){return function(t){t({type:f,payload:e})}}}))(x),E=function(e){Object(u.a)(s,e);var t=Object(l.a)(s);function s(e){var a;return Object(i.a)(this,s),(a=t.call(this,e)).state={},a}return Object(o.a)(s,[{key:"render",value:function(){return Object(a.jsxs)("section",{className:"search-bg",children:[Object(a.jsx)("h1",{className:"search__title",children:"Image search"}),Object(a.jsx)(N,{})]})}}]),s}(n.Component),T=function(e){Object(u.a)(s,e);var t=Object(l.a)(s);function s(e){var a;return Object(i.a)(this,s),(a=t.call(this,e)).state={},a}return Object(o.a)(s,[{key:"render",value:function(){return Object(a.jsx)("section",{className:"results",children:Object(a.jsx)(N,{})})}}]),s}(n.Component);var S=function(e){var t=e.location;return Object(a.jsxs)("div",{className:"App",children:["\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0",Object(a.jsxs)(m.c,{location:t,children:["\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0",Object(a.jsx)(m.a,{exact:!0,path:"/image-search",component:E}),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0",Object(a.jsx)(m.a,{path:"/ResultsPage",component:T}),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0",Object(a.jsx)(m.a,{component:E})]})]})},w=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,77)).then((function(t){var s=t.getCLS,a=t.getFID,n=t.getFCP,c=t.getLCP,r=t.getTTFB;s(e),a(e),n(e),c(e),r(e)}))},k=s(35),Q=s(18),C={},D={},I=Object(_.c)({images:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return Object(Q.a)(Object(Q.a)({},e),{},{images:t.payload});default:return e}},query:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return Object(Q.a)(Object(Q.a)({},e),{},{query:t.payload});default:return e}}}),P=[k.a],R=Object(_.e)(I,{},Object(_.d)(_.a.apply(void 0,P),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()));r.a.render(Object(a.jsx)(O.a,{store:R,children:Object(a.jsx)(y.a,{children:Object(a.jsx)(m.a,{path:"/",component:S})})}),document.getElementById("root")),w()}},[[66,1,2]]]);
//# sourceMappingURL=main.d4b0be72.chunk.js.map